Таблица основывается на файлах в случае отсутствия номера карты: [[Перелёты по билету your_boarding_pass_dot_aero]] - требуется восполнение данных основываясь на номере билета

Из-за того, что в ticket есть данные из boarding_pass, то в этом файле есть некоторое количество перелётов без card_number и паспортных данных. Поэтому для этих строк установить кто именно летал, сложно.

Но эта проблема решается добавлением таблицы НЕИЗВЕСТНЫХ пользователей (где пользователям будут соответствовать их билеты). Т.к. это таблица неизвестных копирует все те же строки без card_number и паспортных данных из boarding_pass (зато с номерами билетов). т.е. получаем взаимное соответствие с помощью номера билета!